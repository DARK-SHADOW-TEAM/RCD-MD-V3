import { default as makeWASocket } from '@whiskeysockets/baileys';

const menuCommand = async (m, sock, config, menu) => {
  try {
    // Function to calculate runtime in hours, minutes, and seconds
    const runtime = (uptime) => {
      const hours = Math.floor(uptime / 3600);
      const minutes = Math.floor((uptime % 3600) / 60);
      const seconds = Math.floor(uptime % 60);
      return `${hours}h ${minutes}m ${seconds}s`;
    };

    const pushname = m.pushName || 'User'; // Retrieve the user's push name

    // Construct the main menu message
    const mainMenu = `
🌟👑  - 𝗠𝗮𝗶𝗻 𝗠𝗲𝗻𝘂 👑🌟

👋 HELLO, ${pushname}!

✨ 𝗪𝗲𝗹𝗰𝗼𝗺𝗲 𝘁𝗼 DEAR! ✨ 

📊 *𝗕𝗼𝘁 𝗜𝗻𝗳𝗼𝗿𝗺𝗮𝘁𝗶𝗼𝗻:*
────────────────────
⏳ *𝗥𝘂𝗻𝘁𝗶𝗺𝗲:* ${runtime(process.uptime())}
👤 *𝗢𝘄𝗻𝗲𝗿 𝗡𝗮𝗺𝗲:* 𝗝𝗮𝗻𝗶𝘁𝗵 𝗥𝗮𝘀𝗵𝗺𝗶𝗸𝗮
📞 *𝗢𝘄𝗻𝗲𝗿 𝗡𝘂𝗺𝗯𝗲𝗿:* ${config.BOT_NUMBER}
────────────────────

📥 *𝗗𝗼𝘄𝗻𝗹𝗼𝗮𝗱 𝗠𝗲𝗻𝘂:*

${menu.download}

────────────────────
🔧 *𝗠𝗮𝗶𝗻 𝗠𝗲𝗻𝘂:*

${menu.main}

────────────────────
🎉 *𝗙𝘂𝗻 𝗠𝗲𝗻𝘂:*

${menu.fun}

────────────────────
👥 *𝗚𝗿𝗼𝘂𝗽 𝗠𝗲𝗻𝘂:*

${menu.group}

────────────────────
🔒 *𝗢𝘄𝗻𝗲𝗿 𝗠𝗲𝗻𝘂:*

${menu.owner}

────────────────────
🔄 *𝗖𝗼𝗻𝘃𝗲𝗿𝘁 𝗠𝗲𝗻𝘂:*

${menu.convert}

────────────────────
🔍 *𝗦𝗲𝗮𝗿𝗰𝗵 𝗠𝗲𝗻𝘂:*

${menu.search}

────────────────────
⚙️ *𝗢𝘁𝗵𝗲𝗿 𝗠𝗲𝗻𝘂:*

${menu.other}

────────────────────
*© RCD MD 𝗕𝗼𝘁 - MD* 
💻 *GitHub:* github.com/Mrrashmika/Queen_Anju-MD🌝
`;

    // Send the constructed main menu message as a reply
    await sock.sendMessage(m.from, { text: mainMenu }, { quoted: m });
  } catch (e) {
    console.error('Error:', e);
    m.reply('An error occurred while displaying the menu.');
  }
};

export default menuCommand;
